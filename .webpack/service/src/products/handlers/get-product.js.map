{"version":3,"file":"src/products/handlers/get-product.js","sources":["webpack:///webpack/bootstrap","webpack:///./src/products/dal/product.repository.ts","webpack:///./src/products/handlers/get-product.ts","webpack:///./src/products/mock/product.mock.ts","webpack:///./src/products/product.service.ts","webpack:///./src/utils/http-response.ts","webpack:///./src/utils/http-status-code.enum.ts","webpack:///./src/utils/validate.ts","webpack:///external \"joi\"","webpack:///external \"tslib\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/products/handlers/get-product.ts\");\n","import { IProduct } from '../product.interface';\nimport { productMock } from '../mock/product.mock';\n\nexport class ProductRepository {\n  public async find(): Promise<IProduct[]> {\n    return productMock;\n  }\n\n  public async findOne(id: string): Promise<IProduct> {\n    const product = productMock.find((item) => item.id === id);\n    return product;\n  }\n}\n","import {\r\n  APIGatewayProxyEvent,\r\n  APIGatewayProxyHandler,\r\n  APIGatewayProxyResult,\r\n} from 'aws-lambda';\r\nimport * as Joi from 'joi';\r\nimport { HttpResponse } from '../../utils/http-response';\r\nimport { HttpStatusCode } from '../../utils/http-status-code.enum';\r\nimport { validate } from '../../utils/validate';\r\nimport { IProduct } from '../product.interface';\r\nimport { productService } from '../product.service';\r\n\r\nconst schema = Joi.object({ id: Joi.string().required() });\r\n\r\nexport const handler: APIGatewayProxyHandler = async (\r\n  event: APIGatewayProxyEvent\r\n): Promise<APIGatewayProxyResult> => {\r\n  try {\r\n    const { error, value } = validate(schema, event.pathParameters);\r\n\r\n    if (error) {\r\n      return new HttpResponse(HttpStatusCode.BAD_REQUEST, error);\r\n    } else {\r\n      const product: IProduct = await productService.findOne(value.id);\r\n\r\n      if (product) {\r\n        return new HttpResponse(HttpStatusCode.OK, product);\r\n      }\r\n\r\n      return new HttpResponse(HttpStatusCode.NOT_FOUND);\r\n    }\r\n  } catch (error) {\r\n    return new HttpResponse(HttpStatusCode.INTERNAL_SERVER_ERROR, error);\r\n  }\r\n};\r\n","import * as faker from 'faker';\nimport { IProduct } from '../product.interface';\n\n// function generateProduct() {\n//   return {\n//     id: faker.random.uuid(),\n//     title: faker.commerce.productName(),\n//     description: faker.commerce.productDescription(),\n//     price: faker.commerce.price(),\n//     imageUrl: faker.image.imageUrl(),\n//   };\n// }\n\nexport const productMock: IProduct[] = [\n  {\n    id: 'ecbfaf6c-f87a-418b-82af-2f5304445216',\n    title: 'Sleek Steel Shirt',\n    description:\n      'The Nagasaki Lander is the trademarked name of several series of Nagasaki sport bikes, that started with the 1984 ABC800J',\n    price: '483.00',\n    imageUrl: 'http://placeimg.com/640/480',\n  },\n  {\n    id: '553993bf-6ba0-46ad-b557-74e121749ca0',\n    title: 'Handmade Frozen Chips',\n    description:\n      'The beautiful range of Apple Natural√© that has an exciting mix of natural ingredients. With the Goodness of 100% Natural Ingredients',\n    price: '837.00',\n    imageUrl: 'http://placeimg.com/640/480',\n  },\n  {\n    id: '1c787d3e-c50f-417f-9f18-6beee5ec07d1',\n    title: 'Handmade Fresh Bike',\n    description:\n      'The automobile layout consists of a front-engine design, with transaxle-type transmissions mounted at the rear of the engine and four wheel drive',\n    price: '781.00',\n    imageUrl: 'http://placeimg.com/640/480',\n  },\n  {\n    id: 'f4af45b7-7442-4539-994c-b696c0c0bf7e',\n    title: 'Sleek Wooden Hat',\n    description:\n      'The Apollotech B340 is an affordable wireless mouse with reliable connectivity, 12 months battery life and modern design',\n    price: '255.00',\n    imageUrl: 'http://placeimg.com/640/480',\n  },\n  {\n    id: '6c095a2e-4f1d-41ce-9bfa-658ff3865791',\n    title: 'Generic Metal Shirt',\n    description:\n      'Ergonomic executive chair upholstered in bonded black leather and PVC padded seat and back for all-day comfort and support',\n    price: '159.00',\n    imageUrl: 'http://placeimg.com/640/480',\n  },\n  {\n    id: '9cb70d2b-1a1f-437e-b767-02035d9bac45',\n    title: 'Fantastic Plastic Chair',\n    description:\n      'Carbonite web goalkeeper gloves are ergonomically designed to give easy fit',\n    price: '271.00',\n    imageUrl: 'http://placeimg.com/640/480',\n  },\n];\n","import { IProduct } from './product.interface';\nimport { ProductRepository } from './dal/product.repository';\n\nexport class ProcutsService {\n  constructor(private repository: ProductRepository) {}\n\n  public async find(): Promise<IProduct[]> {\n    const entities = await this.repository.find();\n    return entities;\n  }\n\n  public async findOne(id: string): Promise<IProduct> {\n    const entity = await this.repository.findOne(id);\n    return entity;\n  }\n}\n\nexport const productService = new ProcutsService(new ProductRepository());\n","import { APIGatewayProxyResult } from 'aws-lambda';\nimport { HttpStatusCode } from './http-status-code.enum';\n\nexport class HttpResponse implements APIGatewayProxyResult {\n  public readonly statusCode: number;\n  public readonly body: string;\n  public readonly headers: {\n    'Content-Type': 'application/json';\n    'Access-Control-Allow-Methods': '*';\n    'Access-Control-Allow-Origin': '*';\n  };\n\n  constructor(statusCode: HttpStatusCode, body: unknown = {}) {\n    this.statusCode = statusCode;\n    this.body = JSON.stringify(body, null, 2);\n  }\n}\n","export enum HttpStatusCode {\n  CONTINUE = 100,\n  SWITCHING_PROTOCOLS = 101,\n  PROCESSING = 102,\n  OK = 200,\n  CREATED = 201,\n  ACCEPTED = 202,\n  NON_AUTHORITATIVE_INFORMATION = 203,\n  NO_CONTENT = 204,\n  RESET_CONTENT = 205,\n  PARTIAL_CONTENT = 206,\n  MULTI_STATUS = 207,\n  ALREADY_REPORTED = 208,\n  IM_USED = 226,\n  MULTIPLE_CHOICES = 300,\n  MOVED_PERMANENTLY = 301,\n  FOUND = 302,\n  SEE_OTHER = 303,\n  NOT_MODIFIED = 304,\n  USE_PROXY = 305,\n  SWITCH_PROXY = 306,\n  TEMPORARY_REDIRECT = 307,\n  PERMANENT_REDIRECT = 308,\n  BAD_REQUEST = 400,\n  UNAUTHORIZED = 401,\n  PAYMENT_REQUIRED = 402,\n  FORBIDDEN = 403,\n  NOT_FOUND = 404,\n  METHOD_NOT_ALLOWED = 405,\n  NOT_ACCEPTABLE = 406,\n  PROXY_AUTHENTICATION_REQUIRED = 407,\n  REQUEST_TIMEOUT = 408,\n  CONFLICT = 409,\n  GONE = 410,\n  LENGTH_REQUIRED = 411,\n  PRECONDITION_FAILED = 412,\n  PAYLOAD_TOO_LARGE = 413,\n  URI_TOO_LONG = 414,\n  UNSUPPORTED_MEDIA_TYPE = 415,\n  RANGE_NOT_SATISFIABLE = 416,\n  EXPECTATION_FAILED = 417,\n  I_AM_A_TEAPOT = 418,\n  MISDIRECTED_REQUEST = 421,\n  UNPROCESSABLE_ENTITY = 422,\n  LOCKED = 423,\n  FAILED_DEPENDENCY = 424,\n  UPGRADE_REQUIRED = 426,\n  PRECONDITION_REQUIRED = 428,\n  TOO_MANY_REQUESTS = 429,\n  REQUEST_HEADER_FIELDS_TOO_LARGE = 431,\n  UNAVAILABLE_FOR_LEGAL_REASONS = 451,\n  INTERNAL_SERVER_ERROR = 500,\n  NOT_IMPLEMENTED = 501,\n  BAD_GATEWAY = 502,\n  SERVICE_UNAVAILABLE = 503,\n  GATEWAY_TIMEOUT = 504,\n  HTTP_VERSION_NOT_SUPPORTED = 505,\n  VARIANT_ALSO_NEGOTIATES = 506,\n  INSUFFICIENT_STORAGE = 507,\n  LOOP_DETECTED = 508,\n  NOT_EXTENDED = 510,\n  NETWORK_AUTHENTICATION_REQUIRED = 511,\n}\n","import { Schema, ValidationResult } from 'joi';\n\nexport function validate(schema: Schema, body: unknown): ValidationResult {\n  return schema.validate(body, {\n    abortEarly: false,\n    allowUnknown: true,\n    stripUnknown: true,\n  });\n}\n","module.exports = require(\"joi\");","module.exports = require(\"tslib\");"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACjFA;AAEA;AACA;;AACA;AACA;AAAA;AAEA;;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAGA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC7DA;AAEA;AACA;AAAA;AAAA;AAEA;;AACA;AACA;AACA;AAAA;AAEA;;AACA;AACA;AACA;AAAA;AACA;AAEA;;;;;;;;;;;;;ACdA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5DA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACRA;;;;;;;;;;;ACAA;;;;A","sourceRoot":""}